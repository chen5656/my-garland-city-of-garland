<!DOCTYPE html>
<html lang='en'>

<head>
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1, shrink-to-fit=no'>
  <title>My Garland</title>
  <meta name='author' content='Huajun Chen'>
  <meta name='description'
    content='My Address aims to provide residents information on nearest city facilities, service zones, neighborhoods and development information. And also provide a crime data map.'>

  <link href='images/favicon.ico' rel='icon' type='image/x-icon' />
  <link rel='stylesheet' href='css/style.css'>

  <link rel='stylesheet' href='resources/bootstrap/bootstrap.4.3.1.min.css' />
  <link rel='stylesheet' href='https://use.fontawesome.com/releases/v5.0.13/css/all.css'
    integrity='sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp' crossorigin='anonymous'>

  <link rel='stylesheet' href='https://js.arcgis.com/4.7/esri/css/main.css'>



</head>

<body>
  <div id='browser-check'>
    <noscript>
      <div class='browser-compatibility-alert d-block bg-danger text-white'>
        <!-- <div class='col-lg-4 col-md-6 font-grey'> -->
        <i class='fas fa-exclamation-triangle  fa-2x '></i>
        <p class='browser-error'>Your browser's Javascript functionality is turned off. Please turn it on so that you
          see the map and do the search.

        </p>
        <!-- </div> -->
      </div>
    </noscript>

    <div class='browser-compatibility-alert d-block bg-danger text-white'>
      <p>The web browser you are using right now may not be fully functional. Please use Chrome or Firefox instead.</p>
    </div>
  </div>
  <header>
    <div class='overflow-hidden relative' aria-hidden='true'>
      <div id='viewDiv' style='width: 100%; height: 350px;'>
      </div>
      <div class='absolute'>
        <h1 class='title'>My Garland</h1>
      </div>
    </div>
  </header>
  <!-- style='display:none;' -->
  <main>

    <div class='container-fluid'>
      <div id='main-content' class='d-none'>

        <div class='row justify-content-md-center r-search-box'>
          <!-- search bar -->
          <div class=' col-lg-4 col-md-6'>
            <div class='mb-3 col-12'>
              <p>Enter a valid City of Garland Address to look up City data.</p>
            </div>
            <div id='search'></div>

          </div>
        </div>
        <article class='row grey-background py-4 d-none' id='nodeResult'>

          <section class='col-lg-4 col-md-12 col-sm-12 r-card'>

            <h2 class='r-title'>
              Location Data
            </h2>
            <div class='r-content'>

              <section class='card'>
                <div class='card-header' id='headingOne'>
                  <div class='mb-0 btn btn-link collapsed' data-toggle='collapse' aria-controls='collapseOne'>
                    <i class='fas fa-minus-square fa-lg'></i>
                    <h3 class='fas fa-lg'>Nearby City Facilities
                    </h3>
                  </div>
                </div>
                <div id='collapseOne' class='card-body collapse show' aria-labelledby='headingOne'
                  data-parent='#accordion'>
                  <div id='nearestCityFacility'>
                    <div class='spinner-grow' role='status'>
                      <span class='sr-only'>Loading...</span>
                    </div>
                    <ul> </ul>
                  </div>
                </div>
              </section>
              <section class='card'>
                <div class='card-header' id='headingTwo'>
                  <div class='mb-0 btn btn-link collapsed' data-toggle='collapse' aria-controls='collapseTwo'>
                    <i class='fas fa-minus-square  fa-lg'></i>
                    <h3 class='fas fa-lg'>Services</h3>
                  </div>
                </div>
                <div id='collapseTwo' class='card-body collapse show' aria-labelledby='headingTwo'
                  data-parent='#accordion'>
                  <div id='service'>
                    <div class='spinner-grow' role='status'>
                      <span class='sr-only'>Loading...</span></div>
                    <ul></ul>
                  </div>
                  <div id="ews_link" class="d-none">
                    <a href="https://www.garlandtx.gov/gov/eg/ews/default.asp" target="_blank"
                      title="goto Environmental Waste Services">goto Environmental Waste Services<br> <img
                        src="images/Env-Waste-Svcs.png" width="30%"></a></div>
                </div>
              </section>

            </div>
          </section>
          <section class='col-lg-4 col-md-12 col-sm-12 r-card'>
            <h2 class='r-title'>
              Reference Data
            </h2>
            <div class='r-content'>
              <section class='card'>
                <div class='card-header' id='headingFour'>
                  <div class='mb-0 btn btn-link collapsed' data-toggle='collapse' aria-controls='collapseFour'>
                    <i class='fas fa-minus-square fa-lg'></i>
                    <h3 class='fas fa-lg'>Reference</h3>
                  </div>
                </div>
                <div id='collapseFour' class='card-body collapse show' aria-labelledby='headingFour'
                  data-parent='#accordion'>
                  <div id='parcelInfo'>
                    <div class='spinner-grow' role='status'>
                      <span class='sr-only'>Loading...</span>
                    </div>
                    <ul></ul>
                  </div>
                </div>
              </section>
              <section class='card'>
                <div class='card-header' id='headingFive'>
                  <div class='mb-0 btn btn-link collapsed' data-toggle='collapse' aria-controls='collapseFive'>
                    <i class='fas fa-minus-square fa-lg'></i>
                    <h3 class='fas fa-lg'>Neighborhoods</h3>
                  </div>
                </div>
                <div id='collapseFive' class='card-body collapse show' aria-labelledby='headingFive'
                  data-parent='#accordion'>
                  <div id='neighborhoods'>
                    <div class='spinner-grow' role='status'>
                      <span class='sr-only'>Loading...</span></div>
                    <ul></ul>
                  </div>
                </div>
              </section>
              <section class='card'>
                <div class='card-header' id='headingThree'>
                  <div class='mb-0 btn btn-link collapsed' data-toggle='collapse' aria-controls='collapseThree'>
                    <i class='fas fa-minus-square fa-lg'> </i>
                    <h3 class='fas fa-lg'>Planning &amp; Development &#47; Zoning
                    </h3>
                  </div>
                </div>
                <div id='collapseThree' class='card-body collapse show' aria-labelledby='headingThree'
                  data-parent='#accordion'>
                  <div id='planning_development-zoning'>
                    <div class='spinner-grow' role='status'>
                      <span class='sr-only'>Loading...</span></div>
                    <ul></ul>
                  </div>
                </div>
              </section>
              <section class='card'>
                <!-- default as hidden. Remove show in the card-body class, and change fa-minus-square to fa-plus-square -->
                <div class='card-header' id='headingEight'>
                  <div class='mb-0 btn btn-link collapsed' data-toggle='collapse' aria-controls='collapseEight'>
                    <i class='fas fa-plus-square fa-lg'> </i>
                    <h3 class='fas fa-lg'>Streets Condition
                    </h3>
                  </div>
                </div>
                <div id='collapseEight' class='card-body collapse ' aria-labelledby='headingEight'
                  data-parent='#accordion'>
                  <div id='street-condition'>

                    <div id='street-condition-toggle'>
                      <label>
                        <span class='mb-2 pl-4'>Add Street PCI to the detail map</span><br>
                        <input type='checkbox' class='ios-switch' id='street-condition-checkbox' />
                        <span class='switch'></span>
                      </label>
                    </div>
                    <div class='p-2 mt-3 d-none black-border' id='street-condition-legend'>
                    </div>
                  </div>
                </div>
              </section>
            </div>
          </section>
          <section class='col-lg-4 col-md-12 col-sm-12 r-card' aria-hidden='true'>
            <h2 class='r-title'>
              Map Data
            </h2>
            <div class='r-content'>

              <section class='card'>
                <div class='card-header' id='headingSeven'>
                  <div class='btn btn-link collapsed' data-toggle='collapse' aria-controls='collapseSeven'>
                    <i class='fas fa-minus-square fa-lg'></i>
                    <h3 class='fas fa-lg'>Detail</h3>
                  </div>
                </div>
                <div id='collapseSeven' class='card-body collapse show' aria-labelledby='headingSeven'
                  data-parent='#accordion'>
                  <div id='subMap'>
                    <div id='subMapView' style='width: 100%; height: 350px;'></div>
                  </div>
                </div>
              </section>
              <section class='card'>
                <div class='card-header' id='headingSix'>
                  <div class='mb-0 btn btn-link collapsed' data-toggle='collapse' aria-controls='collapseSix'>
                    <i class='fas fa-minus-square fa-lg'></i>
                    <h3 class='fas fa-lg' id='crime-map-title'>Crime Map</h3>
                  </div>
                  <a class='btn ' id='open-crime-map' title='Open CrimeReport.com' href='#' target='_blank'>
                    <i class='fas fa-external-link-alt'></i>
                  </a>
                </div>
                <div id='collapseSix' class='card-body collapse show' aria-labelledby='headingSix'
                  data-parent='#accordion'>
                  <div id='crimeData'>

                  </div>
                </div>
              </section>

            </div>
          </section>

        </article>
        <article class='row justify-content-md-center pt-4 d-none grey-background relative' id='suggestedAddresses'>
          <div class='col-lg-4 col-md-8 col-sm-12'>
            <div class='card'>
              <div class='card-body '>
                <h2 class='card-title pb-3'>
                  Address not find. </h2>
                <div class='absolute float-right'>
                  <abbr title='Close this card'>
                    <button type='button' class='btn btn-secondary btn-secondary-right closeButton'
                      aria-controls='suggestedAddresses' aria-label='Close'>
                      <i class='fas fa-times'></i>
                    </button>
                  </abbr>
                </div>
                <div class='card-text' id='address-links'>
                </div>
              </div>
            </div>
          </div>
        </article>
      </div>

    </div>
    <div class='grey-background py-4' id='nodeLinks'>
      <!-- FAQs, Open Data -->


    </div>
  </main>
  <footer class='pt-2 px-3 font-grey'>
    <!--facebook twitter info -->
    <p class='copyright mb-2'> Copyright 2018. City of Garland. </p>
    <p class='copyright-content'>Texas Government Code ยง 2051.102 (2011): This product is for informational purposes
      and may not have been prepared for
      or be suitable for legal, engineering, or surveying purposes. It does not represent an on-the-ground survey and
      represents
      only the approximate relative location of property boundaries.</p>
  </footer>

  <script id='search-result-display' type='text/template'>
    <li index='{{index}}' id='{{id}}'>
      <span class='location-data-tag'>{{name}}: </span>
      <span class='location-data-value'>{{displayValue1}}</span>
      <span class='location-data-distance'> {{distance}}</span>
      <span class='location-data-value'><a href='{{link}}'
          target='_blank' title='{{linkTitle}}'> {{displayValue2}}</a></span>
    </li>
  </script>

  <script id='search-result-display-hardcode' type='text/template'>
    <li index='{{index}}' id='{{id}}'>
      <span class='location-data-tag'>{{name}}: </span>
      {{hardcode}}
    </li>
  </script>

  <script id='crime-map-iframe' type='text/template'>
    <iframe id='crimeDataIFrame' src=' https://www.crimereports.com/home/#!/dashboard?zoom=15&searchText=Garland%252C%2520Texas%252075040%252C%2520United%2520States&incident_types=Assault%252CAssault%2520with%2520Deadly%2520Weapon%252CBreaking%2520%2526%2520Entering%252CDisorder%252CDrugs%252CHomicide%252CKidnapping%252CLiquor%252COther%2520Sexual%2520Offense%252CProperty%2520Crime%252CProperty%2520Crime%2520Commercial%252CProperty%2520Crime%2520Residential%252CQuality%2520of%2520Life%252CRobbery%252CSexual%2520Assault%252CSexual%2520Offense%252CTheft%252CTheft%2520from%2520Vehicle%252CTheft%2520of%2520Vehicle&days=sunday%252Cmonday%252Ctuesday%252Cwednesday%252Cthursday%252Cfriday%252Csaturday&start_time=0&end_time=23&include_sex_offenders=false&current_tab=map&start_date={{start_date}}&end_date={{end_date}}&lat={{lat}}&lng={{long}}' height='400' width='100%' 
    sandbox ='allow-scripts allow-same-origin allow-forms'></iframe>

</script>

  <script>
    //check if IE 7
    (function () {
      var ie = IeVersion();
      console.log('IsIE: ' + ie.IsIE + '||' + 'TrueVersion: ' + ie.TrueVersion + '||' + 'ActingVersion: ' + ie
        .ActingVersion);
      if (ie.IsIE == true && (ie.TrueVersion < 11 || ie.ActingVersion < 11)) {
        document.getElementById('browser-check').style.display = 'block';
      } else {
        document.getElementById('browser-check').style.display = 'none';
      }

      function IeVersion() {
        //Set defaults
        var value = {
          IsIE: false,
          TrueVersion: 0,
          ActingVersion: 0,
          CompatibilityMode: false
        };

        //Try to find the Trident version number
        var trident = navigator.userAgent.match(/Trident\/(\d+)/);
        if (trident) {
          value.IsIE = true;
          //Convert from the Trident version number to the IE version number
          value.TrueVersion = parseInt(trident[1], 10) + 4;
        }

        //Try to find the MSIE number
        var msie = navigator.userAgent.match(/MSIE (\d+)/);
        if (msie) {
          value.IsIE = true;
          //Find the IE version number from the user agent string
          value.ActingVersion = parseInt(msie[1]);
        } else {
          //Must be IE 11 in 'edge' mode
          value.ActingVersion = value.TrueVersion;
        }

        //If we have both a Trident and MSIE version number, see if they're different
        if (value.IsIE && value.TrueVersion > 0 && value.ActingVersion > 0) {
          //In compatibility mode if the trident number doesn't match up with the MSIE number
          value.CompatibilityMode = value.TrueVersion != value.ActingVersion;
        }
        return value;
      }

    })();

    // dojoConfig = {
    //   parseOnLoad: false,
    //   cacheBust: true
    // }
  </script>

  <script src='https://js.arcgis.com/4.7/'></script>

  <script src='config/multilSearch-data.js'></script>
  <script src='config/config-data.js'></script>
  <script src='js/app.js'></script>
</body>

</html>