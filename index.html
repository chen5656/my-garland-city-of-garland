<!DOCTYPE html>
<html lang='en'>

<head>
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1, shrink-to-fit=no'>
  <meta name='author' content='Huajun Chen'>
  <meta name='description'
    content='My Address aims to provide residents information on nearest city facilities, service zones, neighborhoods and development information. And also provide a crime data map.'>
  <title>My Garland</title>

  <!-- iOS -->
  <meta name="apple-mobile-web-app-title" content="My Garland">
  <meta name="application-name" content="My Garland">

  <!-- For non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
  <link rel="apple-touch-icon" sizes="60x60" href="images/icon-60x60.png">
  <!-- For the iPad mini and the first- and second-generation iPad (@1× display) on iOS ≥ 7: -->
  <link rel="apple-touch-icon" sizes="76x76" href="images/icon-76x76.png">
  <!-- For iPhone with @2× display running iOS ≥ 7: -->
  <link rel="apple-touch-icon" sizes="120x120" href="images/icon-120x120.png">
  <!-- For iPad with @2× display running iOS ≥ 7: -->
  <link rel="apple-touch-icon" sizes="152x152" href="images/icon-152x152.png">
  <!-- For iPhone 6 Plus with @3× display: -->
  <link rel="apple-touch-icon" sizes="180x180" href="images/icon-180x180.png">

  <!-- Desktop Browsers -->
  <link rel="icon" type="image/png" href="images/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="images/favicon-194x194.png" sizes="194x194">
  <link rel="icon" type="image/png" href="images/android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="images/favicon-16x16.png" sizes="16x16">

  <!-- Android: Chrome M31 and up, ignored if manifest is present-->
  <!-- For Chrome for Android: -->
  <link rel="icon" sizes="192x192" href="images/android-chrome-192x192.png">

  <!--  <link href='images/favicon.ico' rel='icon' type='image/x-icon' /> -->
  <link rel='stylesheet' href='css/style.css'>
  <link rel='stylesheet' href='resources/bootstrap/bootstrap.4.3.1.min.css' />
  <link rel='stylesheet' href='https://js.arcgis.com/4.11/esri/css/main.css'>
</head>

<body>
  <div id='browser-check'>
    <noscript>
      <div class='browser-compatibility-alert d-block bg-danger text-white'>
        <!-- <div class='col-lg-4 col-md-6 font-grey'> -->
        <p class='browser-error'>Your browser's Javascript functionality is turned off. Please turn it on.</p>
        <!-- </div> -->
      </div>
    </noscript>
    <div class='browser-compatibility-alert d-block bg-danger text-white'>
      <p>The web browser you are using right now may not be fully functional. Please use Chrome or Firefox instead.</p>
    </div>
  </div>

  <div id="offline" class="d-none"><svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="180.000000pt"
      height="180.000000pt" viewBox="0 0 180.000000 180.000000" preserveAspectRatio="xMidYMid meet">
      <g transform="translate(0.000000,180.000000) scale(0.100000,-0.100000)" fill="#dc2533" stroke="none">
        <path d="M0 900 l0 -900 900 0 900 0 0 900 0 900 -900 0 -900 0 0 -900z m991
 640 c82 -15 193 -74 254 -135 66 -66 121 -175 137 -269 34 -206 -90 -462 -375
 -776 -50 -55 -96 -100 -102 -100 -6 0 -43 33 -81 73 -210 218 -363 462 -401
 640 -70 327 232 629 568 567z" />
        <path d="M602 1168 l3 -163 40 0 40 0 5 84 5 85 28 -52 c16 -29 30 -52 33 -52
 2 0 18 26 36 58 l33 57 3 -92 3 -93 39 0 40 0 0 165 0 165 -45 0 c-43 0 -45
 -1 -70 -49 -13 -27 -29 -52 -35 -56 -5 -3 -22 19 -37 49 l-27 56 -48 0 -48 0
 2 -162z" />
        <path d="M940 1323 c0 -3 23 -48 50 -100 45 -85 50 -100 50 -159 l0 -65 43 3
 42 3 6 75 c4 65 11 86 53 163 l48 87 -49 0 -48 -1 -26 -57 -26 -57 -26 58 -26
 57 -45 0 c-26 0 -46 -3 -46 -7z" />
        <path d="M592 928 c-7 -7 -12 -16 -12 -22 0 -5 6 -3 13 6 6 9 23 19 37 21 l25
 4 -25 2 c-15 0 -31 -4 -38 -11z" />
        <path d="M725 906 c11 -27 12 -36 2 -39 -7 -3 -5 -6 6 -6 9 -1 17 -6 17 -13 0
 -6 2 -9 5 -6 6 6 -31 98 -39 98 -3 0 1 -15 9 -34z" />
        <path d="M781 888 c1 -29 4 -43 6 -30 2 12 10 22 17 22 8 0 21 -10 30 -22 12
 -16 14 -17 7 -4 -6 13 -5 26 2 37 16 26 1 49 -33 49 -30 0 -30 0 -29 -52z m59
 22 c0 -15 -7 -20 -25 -20 -18 0 -25 5 -25 20 0 15 7 20 25 20 18 0 25 -5 25
 -20z" />
        <path d="M873 890 c0 -30 2 -43 4 -27 2 15 2 39 0 55 -2 15 -4 2 -4 -28z" />
        <path d="M966 893 c-9 -25 -14 -49 -11 -51 3 -3 5 0 5 6 0 7 10 13 23 13 17 1
 18 2 4 6 -13 3 -16 10 -11 26 4 12 11 24 15 25 12 5 12 22 0 22 -5 0 -16 -21
 -25 -47z" />
        <path d="M1052 888 l1 -53 6 44 6 45 28 -42 c15 -23 29 -42 32 -42 3 0 4 24 3
 53 l-1 52 -6 -43 -6 -43 -25 41 c-14 22 -28 40 -32 40 -5 0 -7 -24 -6 -52z" />
        <path d="M1180 933 c14 -2 31 -12 38 -21 6 -9 12 -11 12 -6 0 18 -24 34 -49
 33 l-26 -2 25 -4z" />
        <path d="M688 881 c-15 -37 -15 -39 1 -30 12 8 27 69 16 69 -1 0 -9 -18 -17
 -39z" />
        <path d="M1006 890 c3 -14 11 -32 16 -40 6 -10 7 -7 2 10 -3 14 -11 32 -16 40
 -6 10 -7 7 -2 -10z" />
        <path d="M577 870 c5 -20 40 -46 50 -37 2 3 -5 8 -16 12 -12 3 -21 13 -21 20
 0 8 -4 16 -9 19 -5 4 -7 -3 -4 -14z" />
        <path d="M620 886 c0 -2 9 -6 20 -9 11 -3 20 -1 20 4 0 5 -9 9 -20 9 -11 0
 -20 -2 -20 -4z" />
        <path d="M1211 857 c-13 -21 -12 -21 5 -5 10 10 16 20 13 22 -3 3 -11 -5 -18
 -17z" />
      </g>
    </svg>
  </div>
  <header>
    <div class='overflow-hidden relative' aria-hidden='true'>
      <div id='viewDiv' style='width: 100%; height: 350px;'>
        <!-- <div id='viewDiv' style='width: 100%; height: 10px;'>  -->
      </div>
      <div class='absolute'>
        <h1 class='title'>My Garland</h1>
      </div>
    </div>
  </header>
  <!-- style='display:none;' -->
  <main>

    <div class='container-fluid'>
      <div id='main-content' class='d-none'>

        <div class='row justify-content-md-center r-search-box'>
          <!-- search bar -->
          <div class=' col-lg-4 col-md-6'>
            <div class='mb-3 col-12'>
              <p>Enter a valid City of Garland Address to look up City data.</p>
            </div>
            <div id='search'></div>

          </div>
        </div>
        <article class='row grey-background py-4 d-none' id='nodeResult'>

          <section class='col-lg-4 col-md-12 col-sm-12 r-card'>

            <h2 class='r-title'>
              Location Data
            </h2>
            <div class='r-content'>

              <section class='card'>
                <div class='card-header' id='headingOne'>
                  <div class='mb-0 btn btn-link collapsed' data-toggle='collapse' aria-controls='collapseOne'>
                    <i class='esri-icon-minus blue-icon'></i>
                    <h3>Nearby City Facilities
                    </h3>
                  </div>
                </div>
                <div id='collapseOne' class='card-body collapse show' aria-labelledby='headingOne'
                  data-parent='#accordion'>
                  <div id='nearestCityFacility'>
                    <div class='spinner-grow' role='status'>
                      <span class='sr-only'>Loading...</span>
                    </div>
                    <ul> </ul>
                  </div>
                </div>
              </section>
              <section class='card'>
                <div class='card-header' id='headingTwo'>
                  <div class='mb-0 btn btn-link collapsed' data-toggle='collapse' aria-controls='collapseTwo'>
                    <i class='esri-icon-minus blue-icon'></i>
                    <h3>Services</h3>
                  </div>
                </div>
                <div id='collapseTwo' class='card-body collapse show' aria-labelledby='headingTwo'
                  data-parent='#accordion'>
                  <div id='service'>
                    <div class='spinner-grow' role='status'>
                      <span class='sr-only'>Loading...</span></div>
                    <ul></ul>
                  </div>
                  <div id="ews_link" class="d-none">
                    <a href="https://www.garlandtx.gov/gov/eg/ews/default.asp" target="_blank"
                      title="goto Environmental Waste Services">goto Environmental Waste Services<br> <img
                        src="images/Env-Waste-Svcs.png" alt="Environmental Waste Services Logo"></a></div>
                </div>
              </section>

            </div>
          </section>
          <section class='col-lg-4 col-md-12 col-sm-12 r-card'>
            <h2 class='r-title'>
              Reference Data
            </h2>
            <div class='r-content'>
              <section class='card'>
                <div class='card-header' id='headingFour'>
                  <div class='mb-0 btn btn-link collapsed' data-toggle='collapse' aria-controls='collapseFour'>
                    <i class='esri-icon-minus blue-icon'></i>
                    <h3>Reference</h3>
                  </div>
                </div>
                <div id='collapseFour' class='card-body collapse show' aria-labelledby='headingFour'
                  data-parent='#accordion'>
                  <div id='parcelInfo'>
                    <div class='spinner-grow' role='status'>
                      <span class='sr-only'>Loading...</span>
                    </div>
                    <ul></ul>
                  </div>
                </div>
              </section>
              <section class='card'>
                <div class='card-header' id='headingFive'>
                  <div class='mb-0 btn btn-link collapsed' data-toggle='collapse' aria-controls='collapseFive'>
                    <i class='esri-icon-minus blue-icon'></i>
                    <h3>Neighborhoods</h3>
                  </div>
                </div>
                <div id='collapseFive' class='card-body collapse show' aria-labelledby='headingFive'
                  data-parent='#accordion'>
                  <div id='neighborhoods'>
                    <div class='spinner-grow' role='status'>
                      <span class='sr-only'>Loading...</span></div>
                    <ul></ul>
                  </div>
                </div>
              </section>
              <section class='card'>
                <div class='card-header' id='headingThree'>
                  <div class='mb-0 btn btn-link collapsed' data-toggle='collapse' aria-controls='collapseThree'>
                    <i class='esri-icon-minus blue-icon'></i>
                    <h3>Planning &amp; Development &#47; Zoning
                    </h3>
                  </div>
                </div>
                <div id='collapseThree' class='card-body collapse show' aria-labelledby='headingThree'
                  data-parent='#accordion'>
                  <div id='planning_development-zoning'>
                    <div class='spinner-grow' role='status'>
                      <span class='sr-only'>Loading...</span></div>
                    <ul></ul>
                  </div>
                </div>
              </section>
              <section class='card d-none'>
                <!-- default as hidden. Remove show in the card-body class, and change fa-minus-square to fa-plus-square -->
                <div class='card-header' id='headingEight'>
                  <div class='mb-0 btn btn-link collapsed' data-toggle='collapse' aria-controls='collapseEight'>
                    <i class='esri-icon-plus blue-icon'></i>
                    <h3>Streets Condition
                    </h3>
                  </div>
                </div>
                <div id='collapseEight' class='card-body collapse ' aria-labelledby='headingEight'
                  data-parent='#accordion'>
                  <div id='street-condition'>

                    <div id='street-condition-toggle'>
                      <label>
                        <span class='mb-2 pl-4'>Add Street PCI to the detail map</span><br>
                        <input type='checkbox' class='ios-switch' id='street-condition-checkbox' />
                        <span class='switch'></span>
                      </label>
                    </div>
                    <div class='p-2 mt-3 d-none black-border' id='street-condition-legend'>
                    </div>
                  </div>
                </div>
              </section>
            </div>
          </section>
          <section class='col-lg-4 col-md-12 col-sm-12 r-card' aria-hidden='true'>
            <h2 class='r-title'>
              Map Data
            </h2>
            <div class='r-content'>

              <section class='card'>
                <div class='card-header' id='headingSeven'>
                  <div class='btn btn-link collapsed' data-toggle='collapse' aria-controls='collapseSeven'>
                    <i class='esri-icon-minus blue-icon'></i>
                    <h3>Detail</h3>
                  </div>
                </div>
                <div id='collapseSeven' class='card-body collapse show' aria-labelledby='headingSeven'
                  data-parent='#accordion'>
                  <div id='subMap'>
                    <div id='subMapView' style='width: 100%; height: 350px;'></div>
                  </div>
                </div>
              </section>
              <section class='card' id='crimeData'>
              </section>

            </div>
          </section>

        </article>
        <article class='row justify-content-md-center pt-4 d-none grey-background relative' id='suggestedAddresses'>
          <div class='col-lg-4 col-md-8 col-sm-12'>
            <div class='card'>
              <div class='card-body '>
                <h2 class='card-title pb-3'>
                  Address not find. </h2>
                <div class='absolute float-right'>
                  <abbr title='Close this card'>
                    <button type="button" class="close closeButton" aria-controls='suggestedAddresses'
                      aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </abbr>
                </div>
                <div class='card-text' id='address-links'>
                </div>
              </div>
            </div>
          </div>
        </article>
      </div>

    </div>
    <div class='grey-background py-4' id='nodeLinks'>
      <!-- FAQs, Open Data -->
    </div>
  </main>
  <footer class='pt-2 px-3 font-grey'>
    <!--facebook twitter info -->
    <p class='copyright mb-2'> Copyright 2018. City of Garland. </p>
    <p class='copyright-content'>Texas Government Code § 2051.102 (2011): This product is for informational purposes
      and may not have been prepared for
      or be suitable for legal, engineering, or surveying purposes. It does not represent an on-the-ground survey and
      represents
      only the approximate relative location of property boundaries.</p>
  </footer>

  <script id='search-result-display' type='text/template'>
    <li index='{{index}}' id='{{id}}'>
      <span class='location-data-tag'>{{name}}: </span>
      <span class='location-data-value'>{{displayValue1}}</span>
      <span class='location-data-distance'> {{distance}}</span>
      <span class='location-data-value'><a href='{{link}}'
          target='_blank' title='{{linkTitle}}'> {{displayValue2}}</a></span>
    </li>
  </script>

  <script id='search-result-display-hardcode' type='text/template'>
    <li index='{{index}}' id='{{id}}'>
      <span class='location-data-tag'>{{name}}: </span>
      {{hardcode}}
    </li>
  </script>

  <script id='crime-map-iframe' type='text/template'>
    <div class="card-header" id="headingSix">
      <div class="mb-0 btn btn-link collapsed" data-toggle="collapse" aria-controls="collapseSix">
        <i class="esri-icon-minus blue-icon"></i>
        <h3 id="crime-map-title">Crime ( <time datetime="{{start_date}} 00:00">{{start_date}}</time> to <time
            datetime="{{end_date}} 23:59">{{end_date}}</time> )</h3>
      </div>
      <a class="btn " id="open-crime-map" title="Open CrimeReport.com"
        href="https://www.crimereports.com/home/#!/dashboard?zoom=15&amp;searchText=Garland%252C%2520Texas%252075040%252C%2520United%2520States&amp;incident_types=Assault%252CAssault%2520with%2520Deadly%2520Weapon%252CBreaking%2520%2526%2520Entering%252CDisorder%252CDrugs%252CHomicide%252CKidnapping%252CLiquor%252COther%2520Sexual%2520Offense%252CProperty%2520Crime%252CProperty%2520Crime%2520Commercial%252CProperty%2520Crime%2520Residential%252CQuality%2520of%2520Life%252CRobbery%252CSexual%2520Assault%252CSexual%2520Offense%252CTheft%252CTheft%2520from%2520Vehicle%252CTheft%2520of%2520Vehicle&amp;days=sunday%252Cmonday%252Ctuesday%252Cwednesday%252Cthursday%252Cfriday%252Csaturday&amp;start_time=0&amp;end_time=23&amp;include_sex_offenders=false&amp;current_tab=map&amp;start_date={{start_date}}&end_date={{end_date}}&lat={{lat}}&lng={{long}}"
        target="_blank">
        <i class="esri-icon-link-external blue-icon"></i>
      </a>
    </div>
    <div id="collapseSix" class="card-body collapse show" aria-labelledby="headingSix"
      data-parent="#accordion">      
      <iframe id='crimeDataIFrame' src=' https://www.crimereports.com/home/#!/dashboard?zoom=15&searchText=Garland%252C%2520Texas%252075040%252C%2520United%2520States&incident_types=Assault%252CAssault%2520with%2520Deadly%2520Weapon%252CBreaking%2520%2526%2520Entering%252CDisorder%252CDrugs%252CHomicide%252CKidnapping%252CLiquor%252COther%2520Sexual%2520Offense%252CProperty%2520Crime%252CProperty%2520Crime%2520Commercial%252CProperty%2520Crime%2520Residential%252CQuality%2520of%2520Life%252CRobbery%252CSexual%2520Assault%252CSexual%2520Offense%252CTheft%252CTheft%2520from%2520Vehicle%252CTheft%2520of%2520Vehicle&days=sunday%252Cmonday%252Ctuesday%252Cwednesday%252Cthursday%252Cfriday%252Csaturday&start_time=0&end_time=23&include_sex_offenders=false&current_tab=map&start_date={{start_date}}&end_date={{end_date}}&lat={{lat}}&lng={{long}}' height='400' width='100%' 
      sandbox ='allow-scripts allow-same-origin allow-forms'></iframe>     
    </div>
  </script>

  <script id='suggest-address' type='text/template'>
    <li><button class="btn btn-link">{{streetNumber}} {{streetLabel}}</button></li>
  </script>

  <script>
    //check if IE 7
    (function () {
      var ie = IeVersion();
      console.log('IsIE: ' + ie.IsIE + '||' + 'TrueVersion: ' + ie.TrueVersion + '||' + 'ActingVersion: ' + ie
        .ActingVersion);
      if (ie.IsIE == true && (ie.TrueVersion < 11 || ie.ActingVersion < 11)) {
        document.getElementById('browser-check').style.display = 'block';
      } else {
        document.getElementById('browser-check').style.display = 'none';
      }

      function IeVersion() {
        //Set defaults
        var value = {
          IsIE: false,
          TrueVersion: 0,
          ActingVersion: 0,
          CompatibilityMode: false
        };

        //Try to find the Trident version number
        var trident = navigator.userAgent.match(/Trident\/(\d+)/);
        if (trident) {
          value.IsIE = true;
          //Convert from the Trident version number to the IE version number
          value.TrueVersion = parseInt(trident[1], 10) + 4;
        }

        //Try to find the MSIE number
        var msie = navigator.userAgent.match(/MSIE (\d+)/);
        if (msie) {
          value.IsIE = true;
          //Find the IE version number from the user agent string
          value.ActingVersion = parseInt(msie[1]);
        } else {
          //Must be IE 11 in 'edge' mode
          value.ActingVersion = value.TrueVersion;
        }

        //If we have both a Trident and MSIE version number, see if they're different
        if (value.IsIE && value.TrueVersion > 0 && value.ActingVersion > 0) {
          //In compatibility mode if the trident number doesn't match up with the MSIE number
          value.CompatibilityMode = value.TrueVersion != value.ActingVersion;
        }
        return value;
      }

    })();

    // dojoConfig = {
    //   parseOnLoad: false,
    //   cacheBust: true
    // }
  </script>

  <script src="resources/localforage/localforage.min.js"></script>
  <!-- <script src="resources/localforage/localforage-getitems.js"></script> -->
  <!-- <script src="resources/localforage/localforage-setitems.js"></script> -->

  <!-- <script src='resources/systemjs/systemjs.js'></script> -->

  <script src='https://js.arcgis.com/4.11/'></script>

  <script src='js/swRegister.js'></script>
  <script src='config/multilSearch-data.js'></script>
  <script src='config/config-data.js'></script>
  <script src='js/clientStorage.js'></script>
  <script src='js/template.js'></script>
  <script src='js/app.js'></script>
</body>

</html>